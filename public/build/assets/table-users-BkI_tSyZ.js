import{S as t}from"./sweetalert2.esm.all-B0wIdSGR.js";$(document).ready(function(){l("#editUserForm","#edit_user_password","#edit_user_password_confirmation","#passError"),f(),m(),window.openModal=i,window.closeModal=u,window.editUser=c});function l(o,e,r,n){$(o).on("submit",function(s){const a=$(e).val(),d=$(r).val();if(a&&a!==d)return s.preventDefault(),$(n).removeClass("hidden"),$(r).addClass("border-red-500"),$(e).addClass("border-red-500"),!1;$(n).addClass("hidden"),$(r).removeClass("border-red-500"),$(e).removeClass("border-red-500")})}function i(o){const e=$(`#${o}`);e.length?e.removeClass("hidden").addClass("flex"):console.error(`Modal con ID "${o}" no encontrado.`)}function u(o){const e=$(`#${o}`);e.length?e.removeClass("flex").addClass("hidden"):console.error(`Modal con ID "${o}" no encontrado.`)}function c(o,e,r,n){$("#editUserForm").attr("action",`/users/${o}`),$("#edit_user_name").val(e),$("#edit_user_email").val(r),$("#edit_user_role").val(n),$("#edit_user_password").val(""),$("#edit_user_password_confirmation").val(""),$("#passError").addClass("hidden"),i("editUserModal")}function f(o,e){$(document).on("click",".delete-user",function(){const r=$(this).data("user-id");t.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",customClass:{cancelButton:"bg-gray-400 text-white px-4 py-2 rounded hover:bg-gray-500",confirmButton:"bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600"}}).then(n=>{n.isConfirmed?$.ajax({url:`/users/${r}`,type:"DELETE",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(s){s.success?t.fire("¡Eliminado!",s.message,"success").then(()=>{location.reload()}):t.fire("Error",s.message,"error")},error:function(s,a,d){console.error("Error al eliminar el usuario:",s),console.error("Estado:",a),console.error("Mensaje de error:",d),t.fire("Error","No se pudo eliminar el usuario. Inténtalo más tarde.","error")}}):t.fire({title:"Cancelado",text:"El usuario está a salvo :)",icon:"info",confirmButtonText:"Entendido",customClass:{confirmButton:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}})})})}function m(){setTimeout(function(){$("#message-susses").addClass("hidden")},3e3)}
